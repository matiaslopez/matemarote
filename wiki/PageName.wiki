#summary format documentation

= Formatos de los juegos y logs =
Al iniciarse un juego, esta carga un archivo GAME_FILE donde se le especifican distintas opciones, asi como una lista de trials a utilizar.

La sintaxis del archivo GAME_FILE es una 'lista'. (formato muy facil de manipular con python, javascript y flash).
Una lista es un conjunto de ITEM, encerrados entre corchetes, donde un ITEM a la vez puede ser una lista.

por ejemplo, esta es una lista de 3 items, cuyo tercer item es a la vez, una lista de 2 items.
ej: [ITEM, ITEM, [ITEM, ITEM]]

En la definicion del formato.


= Memoria =

== Formato del GAME_FILE ==

=== En el GAME_FILE de un juego de memoria especificamos: ===
 * nivel_inicial (_numero entero_):
   * Es el nivel en el que se empieza jugando.
   * *tiene* que haber al menos un trial de este nivel.
 * perdidas (_numero entero_):
   * La cantidad de veces consecutivas que uno debe perder antes de disminuir el nivel.
 * victorias (_numero entero_):
   * La cantidad de veces consecutivas que uno debe ganar antes de aumentar el nivel.
 * numero_de_trials (_numero entero_):
   * La cantidad de trials a jugar, luego de jugar esta cantidad, el juego termina.
 * trials (_lista de TRIAL_):
   * La lista de TRIAL disponibles para el juego.
   * Cuando el juego necesita un trial de un nivel en particular, elige al azar entre todos los TRIAL que tienen ese nivel.

=== Un TRIAL es una lista con ===
 * nivel (_numero entero_):
   * El nivel de dificultad del trial.
 * agrupacion (_numero entero de 0 a 7 inclusive_):
   * 0 significa que no hay agrupamiento.
   * De no ser 0, el valor es el indice (contando desde 1) del elemento de la FICHA por el que agrupamos. ver la descripcion de FICHA para ver la correspondencia indice<>elemento.
 * fichas (_lista de FICHA_):
   * La lista de FICHA a usar para el trial.

=== Una FICHA es una lista con ===
 * marco (_numero entero de 1 a 12 inclusive_)
   * Siempre debe haber un marco
   * Es el marco a usar para la ficha, estos son los valores:
     # Cuadrado con la esquina sup.der. redondeada _../../res/svg/marcos/casiuncuadrado.svg_
     # Circulo _../../res/svg/marcos/circulo.svg_
     # Nubecita _../../res/svg/marcos/circulosss.svg_
     # Cuadrado redondeado en todas las esquinas _../../res/svg/marcos/cuadrado.svg_
     # Cuadrado con las esquinas sup.der. e inf.izq. redondeadas _../../res/svg/marcos/doble gota.svg_
     # Cuadrado con las esquinas inf.der. e inf.izq. redondeadas _../../res/svg/marcos/escudo.svg_
     # Cuadrado con las esquinas sup.der. y sup.izq redondeadas _../../res/svg/marcos/escudo2.svg_
     # Estrella de 20 puntas _../../res/svg/marcos/estrella.svg_
     # Cuadrado con las esquinas inf.izq, sup.der. y sup.izq. redondeadas. _../../res/svg/marcos/gota.svg_
     # Estrella de 8 puntas _../../res/svg/marcos/poligono.svg_
     # Estrella de 8 puntas en la mitad superior, hexagono en la inferior _../../res/svg/marcos/raro1.svg_
     # Estrella de 8 puntas en la mitad superior, circulo en la inferior _../../res/svg/marcos/raro2.svg_

 * fondo (_numero entero de 1 a 13 inclusive_):
   * siempre debe haber un fondo
   * Es el color o trama de fondo a usar en la ficha
     # ../../res/svg/fondos/playa.svg
     # ../../res/svg/fondos/azul.svg
     # ../../res/svg/fondos/celeste.svg
     # ../../res/svg/fondos/gris.svg
     # ../../res/svg/fondos/marron.svg
     # ../../res/svg/fondos/naranja.svg
     # ../../res/svg/fondos/rojo.svg
     # ../../res/svg/fondos/rosa.svg
     # ../../res/svg/fondos/verde.svg
     # ../../res/svg/fondos/violeta.svg
     # ../../res/svg/fondos/amarillo.svg
     # ../../res/svg/fondos/fucsia.svg
     # ../../res/svg/fondos/marino.svg (celeste)

 * sombrilla (_numero entero de 0 a 12 inclusive _)
   * 0 significa que no hay sombrilla
   * valores:
     # violeta _../../res/svg/sombrillas/1.svg_
     # fucsia _../../res/svg/sombrillas/2.svg_
     # verde _../../res/svg/sombrillas/3.svg_
     # marron _../../res/svg/sombrillas/4.svg_
     # celeste _../../res/svg/sombrillas/5.svg_
     # rosa _../../res/svg/sombrillas/6.svg_
     # naranja _../../res/svg/sombrillas/7.svg_
     # amarillo _../../res/svg/sombrillas/8.svg_
     # rojo _../../res/svg/sombrillas/9.svg_
     # rojo/naranja _../../res/svg/sombrillas/10.svg_
     # gris _../../res/svg/sombrillas/11.svg_
     # azul _../../res/svg/sombrillas/12.svg_

 * baldes (_numero entero de 0 a 2 inclusive_)
   * 0 significa que no hay baldes
   * valores:
     # 2 baldes _../../res/svg/baldes/2.svg_
     # 4 baldes _../../res/svg/baldes/4.svg_

 * estrellas (_numero entero de 0 a 10 inclusive_)
  * El valor se corresponde con la cantida de estrellas mostradas
  * valores:
     # _../../res/svg/estrellas/1.svg_
     # _../../res/svg/estrellas/2.svg_
     # _../../res/svg/estrellas/3.svg_
     # _../../res/svg/estrellas/4.svg_
     # _../../res/svg/estrellas/5.svg_
     # _../../res/svg/estrellas/6.svg_
     # _../../res/svg/estrellas/7.svg_
     # _../../res/svg/estrellas/8.svg_
     # _../../res/svg/estrellas/9.svg_
     # _../../res/svg/estrellas/10.svg_

 * personaje (_numero entero de 0 a 3 inclusive_)
   * 0 significa que no hay personaje
   * valores:
     # ana parada _../../res/svg/personaje/anaparada.svg_
     # ana sentada _../../res/svg/personaje/anareposera.svg_
     # ono parado _../../res/svg/personaje/onoplaya.svg_

 * lentes (_numero entero de 0 a 1 inclusive_)<- jeje, o sea, 0 o 1
   * el archivo de los lentes es _../../res/svg/lentes/lentes.svg_

== Notacion corta de un nivel de memoria ==
JUEGO = [nivel_inicial,
         perdidas,
         victorias,
         numero_de_trials,
         [TRIAL, TRIAL,...]]
TRIAL = [nivel, agrupacion, [FICHA, FICHA,...]]
FICHA = [marco, fondo, sombrilla, baldes, estrellas, personaje, lentes]

Una vez guardado el log crudo, se puede parsear para generar un log que,
tambien en formato de listas anidadas, nos muestra:
* una lista de TRIAL_RESPONSE
...donde cada TRIAL_RESPONSE tiene:
* el TRIAL jugado (como vimos mas arriba)
* el RESPONSE, o respuesta del jugador a ese trial.
...cada RESPONSE tiene:
* el resultado, correcto o incorrecto del trial
* una lista de CHOICES que hizo el jugador en cada instancia
...cada CHOICE tiene:
* el numero de ficha elegida (con respecto a como estan en el TRIAL)
* la ultima posicion del mouse, en una lista [x,y]
* una lista de objetos MOUSEMOVE, representando los distintos
movimientos del mouse hasta elegir una ficha.
* una lista de las posiciones de cada ficha (los llamamos CARD_POS)
...cada MOUSEMOVE tiene:
* la posicion x de ese movimiento.
* la posicion y de ese movimiento
* los milisegundos desde el inicio del juego
... y cada CARD_POS tiene:
* la posicion x de la ficha
* la posicion y de la ficha

(ahora, en resumen)
GAME_LOG = [TRIAL_RESPONSE, TRIAL_RESPONSE, ...]
TRIAL_RESPONSE = [TRIAL, RESPONSE]
RESPONSE = [result, [CHOICE, CHOICE, ...]]
CHOICE = [card_id,
          [last_mouse_x, last_mouse_y],
          [MOUSEMOVE, MOUSEMOVE, ...],
          [CARD_POS, CARD_POS, ...]]
MOUSEMOVE = [x,y,time]
CARD_POS = [x,y]